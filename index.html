<!DOCTYPE html>
<html lang="en">
<head>
  <title>Choose</title>
  <meta name="viewport" content="width=device-width, user-scalable=no" />
  <link rel="stylesheet" type="text/css" href="styles.css" media="screen" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#333" id="theme" />
  <script src="https://cdn.rawgit.com/GoogleChrome/pwacompat/v1.0.3/pwacompat.min.js"></script>

  <meta id="theme" name="theme-color" content="#084066" />
</head>
<body>

<header>
  <button id="fullscreen"></button>
</header>
<choose-board id="choose"></choose-board>

<script src="elements.js"></script>
<script>
'use strict';
(function() {
  const isApp = window.location.search.indexOf('manifest') !== -1;
  const isMobile = window.orientation !== undefined;

  const chooseEl = document.getElementById('choose');
  const themeEl = document.head.querySelector('#theme');
  const toggleEl = document.getElementById('fullscreen');

  Element.prototype.requestFullscreen =
      Element.prototype.requestFullscreen || Element.prototype.webkitRequestFullscreen;
  const fullscreenEnabled = document.fullscreenEnabled || document.webkitFullscreenEnabled;
  toggleEl.hidden = isApp || !isMobile || !Element.prototype.requestFullscreen;

  const defaultTheme = themeEl.getAttribute('content');
  chooseEl.addEventListener('winner', ev => {
    themeEl.setAttribute('content', ev.detail || defaultTheme);
  });

  // hide on fullscreen
  toggleEl.addEventListener('click', ev => document.documentElement.requestFullscreen());
  const changeHandler =
      ev => toggleEl.hidden = document.fullscreenElement || document.webkitFullscreenElement;
  document.addEventListener('fullscreenchange', changeHandler);
  document.addEventListener('webkitfullscreenchange', changeHandler);
}());
</script>

</body>
</html>
